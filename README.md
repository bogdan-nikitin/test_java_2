# Тестовое задание для стажера Java-разработчик в команду технологий фонт-офиса

## 1 задание

Решение на языке Java (21).

Исходный код находится по пути `src/main/java/scene`.
Использована система сборки Maven.

Метод `main` находится в `Main.java`.
Программа считывает сценку из консоли и затем выводит её туда же.
Программа считывает ввод, пока не получит EOF.
Ввод не должен содержать пустых линий на конце, это считается некорректным вводом.

К коду прилагается документация, находящаяся по пути `src/main/javadoc`.

Дополнительно к решению написаны тесты на JUnit 5, они
находятся по пути `src/test/java/db/CacheTest.java`.

Собранное решение находится по пути `target`.

## 2 задание

При оценке использовался язык Java, 64-битная виртуальная машина HotSpot.

Для поиска за O(1) подойдёт хэш-таблица, представленная в Java 
`HashMap`. Хэш-таблица хранит пары ключ-значение, где ключом в нашем 
случае будет номер телефона, а значением - полное имя клиента.

Номер телефона состоит максимум из 15 цифр. Для его хранения нам
потребуется log2(10^15) бит, что при округлении даёт 50 бит.
Для хранения номера воспользуемся типом `Long`, который позволяет хранить числа размером 64 бита.
В HotSpot объекты выравниваются по 8 байт, каждый объект имеет заголовок, который занимает 2 машинных слова (16 байт в нашем случае).
Таким образом, `Long` будет занимать 24 байта (20 байтов занимают данные, округляем до множителя 8).

Имена будем хранить строкой, представленной в Java `String`. 
В Java строка хранит указатель на массив символов, 
который будет занимать около 60 байт (16 байта заголовок, 4 байта размер массива (int), 20 символов по 2 байта, так как в Java используется UTF-16),
хэш строки на 4 байта (один int), заголовок объекта 16 байт. Итого 80 байт на полное имя клиента.

Каждая запись в `HashMap` добавляет накладные расходы на объект (например, хэш-таблица, ссылки и т.д., оценим это в 32 байта на запись).

Итого получаем 24+80+32=136 байт на запись. Умножив на количество записей, получаем оценку 2,38 Гб.


Оценим минимальное количество памяти, необходимое для хранения всех записей.

Будем хранить записи побитово в одном массиве, пары номер-имя будем сохранять в массиве друг за другом.
Пара будет хранится как номер, после которого сразу записано имя. Для разделения пар между собой выделим в алфавите символ-разделитель.
Для разделения номера и имени разделитель не потребуется, так как номер имеет фиксированный размер.

Для номера, как мы поняли, достаточно 50 бит. 
Имена состоят из латинских и кириллических символов, в сумме 59 символов. Добавив к этому символ-разделитель, получаем 60 символов. Для хранения одного символа
достаточно 6 бит. 

Таким образом, получаем что на одну запись уйдёт в среднем 50 + 6 * 20 + 6 = 176 бит.
В сумме уйдёт 3301465728 бит, или 412683216 байт.
Хранить биты будем в массиве байт (byte в Java). С учётом заголовка в 16 байт,
массив займёт около 393,57 Мб.


